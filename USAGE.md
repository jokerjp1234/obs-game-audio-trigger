# 使用方法

## インストール後の設定

### 1. OBS Studioでソースを追加

1. OBS Studioを起動
2. ソース一覧で「+」をクリック
3. 「Game Audio Trigger」を選択
4. 適当な名前を付けて「OK」

### 2. プラグイン設定

#### 基本設定
- **有効**: プラグインの有効/無効を切り替え
- **プロセス名**: 監視するゲームの実行ファイル名（例: `game.exe`）
- **テンプレート画像**: 検出したい画像ファイルのパス
- **音声ファイル**: 再生する音楽ファイルのパス

#### マッチング設定
- **マッチング閾値**: 検出感度（0.0-1.0、高いほど厳密）
- **クールダウン時間**: 連続再生防止の待機時間（ミリ秒）

#### 音声設定
- **音量**: 再生音量（0.0-1.0）
- **再生速度**: 再生速度（0.1-3.0倍）
- **再生時間**: 再生時間の制限（-1で全体再生）

## 設定例

### ゲーム「Example Game」でアイテム取得音を鳴らす

1. **プロセス名**: `ExampleGame.exe`
2. **テンプレート画像**: アイテム取得時の画面キャプチャ（PNG/JPG）
3. **音声ファイル**: `item_get.wav`
4. **マッチング閾値**: `0.8`
5. **クールダウン時間**: `2000` (2秒)
6. **音量**: `0.7`

### RPGでレベルアップ音を鳴らす

1. **プロセス名**: `rpg_game.exe`
2. **テンプレート画像**: 「LEVEL UP!」テキストの画像
3. **音声ファイル**: `levelup.mp3`
4. **マッチング閾値**: `0.9` (厳密に検出)
5. **再生時間**: `3.0` (3秒間のみ再生)

## テンプレート画像の作成のコツ

### 良い画像の特徴
- **明確な特徴**: 他の部分と区別しやすい
- **適度なサイズ**: 50x50～200x200ピクセル程度
- **背景とのコントラスト**: はっきりとした境界
- **一意性**: ゲーム内で唯一の表示

### 避けるべき画像
- 単色の背景
- 頻繁に変化する数値（HP、スコアなど）
- 小さすぎる画像（20x20ピクセル以下）
- ぼやけた画像

### 画像キャプチャ方法

1. **Snipping Tool/PrintScreen**
   - ゲーム画面で検出したい部分をキャプチャ
   - PNG形式で保存（JPEGも可能だが画質劣化あり）

2. **専用ツール**
   - Greenshot
   - LightShot
   - ShareX

## トラブルシューティング

### 音が鳴らない場合

1. **プロセス検出の確認**
   - ゲームが実際に起動しているか
   - プロセス名が正確か（タスクマネージャーで確認）

2. **画像認識の確認**
   - テンプレート画像が存在するか
   - マッチング閾値が適切か（0.6-0.9で調整）
   - デバッグモードを有効にしてログを確認

3. **音声ファイルの確認**
   - ファイルが存在し、アクセス可能か
   - サポートされている形式か（WAV/MP3/OGG）
   - 他のプレイヤーで正常に再生できるか

### 誤検出が多い場合

- **マッチング閾値を上げる**: 0.8→0.9
- **クールダウン時間を長くする**: 1000ms→3000ms
- **テンプレート画像をより具体的に**: 周囲の背景も含める

### 検出されない場合

- **マッチング閾値を下げる**: 0.8→0.6
- **テンプレート画像のサイズを調整**: より大きく/小さく
- **ゲームの解像度/ウィンドウサイズを固定**

## デバッグ機能

### デバッグモードの活用

「デバッグモード」を有効にすると:
- 詳細なログがOBSのログファイルに出力
- プロセス検出状況の確認
- 画像マッチングの結果表示

### ログファイルの場所

- Windows: `%APPDATA%/obs-studio/logs/`
- 最新のログファイルを確認

### よくあるログメッセージ

```
[Game Audio Trigger Debug] Target process set to: game.exe
[Game Audio Trigger Debug] Template image loaded: template.png
[Game Audio Trigger Debug] Match found! Confidence: 0.85 at (320.0, 240.0)
[Game Audio Trigger Debug] Audio playback triggered successfully
```

## 高度な使用例

### 複数の検出パターン

同じゲームに対して複数のGame Audio Triggerソースを作成し、異なる画像・音声を設定:
- アイテム取得用
- レベルアップ用
- ボス撃破用
- クリア用

### ストリーミング配信での活用

- **視聴者への分かりやすい演出**
- **重要な瞬間の強調**
- **ゲーム音声とは別の効果音追加**

### 録画での活用

- **編集時の目印として**
- **ハイライト部分の自動マーキング**
- **後から音声を重ねる手間を削減**
